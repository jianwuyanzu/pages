(function(t){function e(e){for(var n,a,o=e[0],h=e[1],c=e[2],l=0,u=[];l<o.length;l++)a=o[l],s[a]&&u.push(s[a][0]),s[a]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);d&&d(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var o=i[a];0!==s[o]&&(n=!1)}n&&(r.splice(e--,1),t=h(h.s=i[0]))}return t}var n={},a={index:0},s={index:0},r=[];function o(t){return h.p+"js/"+({}[t]||t)+"."+{"chunk-34299ade":"7406c494","chunk-404cc779":"fd4708bb","chunk-44df9965":"208889bb","chunk-5220882d":"f3c29983","chunk-7b759844":"ff861b29","chunk-2992026a":"5f13fb66"}[t]+".js"}function h(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,h),i.l=!0,i.exports}h.e=function(t){var e=[],i={"chunk-34299ade":1,"chunk-404cc779":1,"chunk-44df9965":1,"chunk-5220882d":1,"chunk-7b759844":1,"chunk-2992026a":1};a[t]?e.push(a[t]):0!==a[t]&&i[t]&&e.push(a[t]=new Promise(function(e,i){for(var n="css/"+({}[t]||t)+"."+{"chunk-34299ade":"b4f977ff","chunk-404cc779":"7576685f","chunk-44df9965":"8fa763c2","chunk-5220882d":"0e433876","chunk-7b759844":"52a859c2","chunk-2992026a":"0e433876"}[t]+".css",s=h.p+n,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var c=r[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===s))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],l=c.getAttribute("data-href");if(l===n||l===s)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.request=n,delete a[t],d.parentNode.removeChild(d),i(r)},d.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){a[t]=0}));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,i){n=s[t]=[e,i]});e.push(n[2]=r);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,h.nc&&l.setAttribute("nonce",h.nc),l.src=o(t),c=function(e){l.onerror=l.onload=null,clearTimeout(u);var i=s[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");r.type=n,r.request=a,i[1](r)}s[t]=void 0}};var u=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},h.m=t,h.c=n,h.d=function(t,e,i){h.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},h.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(t,e){if(1&e&&(t=h(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(h.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)h.d(i,n,function(e){return t[e]}.bind(null,n));return i},h.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return h.d(e,"a",e),e},h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},h.p="",h.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("c31f")},"1a49":function(t,e,i){},"36ef":function(t,e,i){},5348:function(t,e,i){"use strict";var n,a=i("2909"),s=i("2b0e"),r=i("8c4f"),o=[{path:"/home",name:"home",component:function(){return i.e("chunk-34299ade").then(i.bind(null,"1cf2"))},meta:{title:"welcome"},children:[]}],h=o,c=[{path:"/layout",name:"layout",component:function(){return i.e("chunk-44df9965").then(i.bind(null,"27bb"))},redirect:"/layout/h5Game",meta:{title:"主页"},children:[{path:"/layout/h5Game",name:"h5Game",component:function(){return i.e("chunk-404cc779").then(i.bind(null,"80d8"))},redirect:"/layout/h5Game/escape",meta:{title:"h5Game"},children:[{path:"/layout/h5Game/escape",name:"escape",component:function(){return i.e("chunk-7b759844").then(i.bind(null,"3f16"))},meta:{title:"粒子逃脱"}}]}]}],l=c,u=(i("cadf"),i("551c"),i("097d"),[{path:"/404",name:"404",component:function(){return i.e("chunk-5220882d").then(i.bind(null,"3575"))},meta:{title:"404"}}]),d=u;s["default"].use(r["a"]);var f={routes:[{path:"/",redirect:"/home"}]};(n=f.routes).push.apply(n,Object(a["a"])(h).concat(Object(a["a"])(l),Object(a["a"])(d)));var v=new r["a"](f);v.beforeEach(function(t,e,i){t.meta.title?(document.title=t.meta.title,i()):v.push({name:"404"})});e["a"]=v},7376:function(t,e,i){},c31f:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"customScrollbar",attrs:{id:"app"}},[i("router-view")],1)},s=[],r={name:"App",mounted:function(){console.log(Object({NODE_ENV:"production",VUE_APP_URL:"www.prod.com",BASE_URL:""}).API_ROOT)}},o=r,h=(i("c88a"),i("2877")),c=Object(h["a"])(o,a,s,!1,null,"af8418bc",null);c.options.__file="App.vue";var l=c.exports,u=i("5348"),d=i("2f62");n["default"].use(d["a"]);var f,v,m=new d["a"].Store({state:{},mutations:{},actions:{}}),y=i("5c96"),p=i.n(y),g=(i("0fae"),i("1f54"),i("36ef"),i("7f7f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"escape"},[i("canvas",{ref:"canvas",staticClass:"canvas"}),i("div",{staticClass:"statusBar"},[i("span",{staticClass:"statusBar_life"},[t._v("额外生命："+t._s(t.life))]),i("span",{staticClass:"statusBar_time"},[t._v("时间："+t._s(t.time)+"s")])]),i("div",{staticClass:"panel",class:{panel_gameStart:1==t.state}},[i("div",{staticClass:"gameStart"},[0==t.state?i("p",[t._v("ESCAPE GAME")]):t._e(),2==t.state?i("p",[t._v("GAME OVER")]):t._e(),0==t.state?i("div",{staticClass:"btn",on:{click:function(e){t.startGame()}}},[t._v("start")]):t._e(),2==t.state?i("div",{staticClass:"btn",on:{click:function(e){t.resetGame()}}},[t._v("play again")]):t._e()])])])}),b=[],x=(i("c7c6"),i("d4ec")),k=i("bee2"),w=function(){function t(){Object(x["a"])(this,t)}return Object(k["a"])(t,[{key:"init",value:function(t){this.canvas=t.canvas,this.ctx=this.canvas.getContext("2d"),this.width=t.width,this.height=t.height}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"render",value:function(){this.clear(),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height)}}]),t}(),O=new w,S=(i("6c7b"),i("99de")),P=i("7e84"),j=i("262e"),M=function t(e){Object(x["a"])(this,t),e&&(this.x=e.x||1,this.y=e.y||1,this.radius=e.radius,this.color=e.color)},T=M,_=function(t){function e(t){var i;return Object(x["a"])(this,e),i=Object(S["a"])(this,Object(P["a"])(e).call(this,t)),i.radius=2*Math.random()+3,i.color="red",i.speed=t.speed||2*Math.random()+.5,i.collision=!1,i}return Object(j["a"])(e,t),Object(k["a"])(e,[{key:"update",value:function(){this.x-=this.speed,this.y+=this.speed,this.x<-10&&(this.x=O.width+10+30*Math.random(),this.collision=!1),this.y>O.height+10&&(this.y=-30*Math.random()-10,this.collision=!1)}},{key:"speedUp",value:function(t){this.speed+=t||.2}},{key:"speedDown",value:function(t){var e=t||.8;this.speed>e&&(this.speed-=e)}},{key:"minimize",value:function(t){var e=t||2;this.radius>e&&(this.radius-=e)}},{key:"magnify",value:function(t){this.radius+=t||2}},{key:"escape",value:function(t){var e=Math.hypot(t.x-this.x,t.y-this.y),i=t.gravityRadius*(Math.abs(t.x-this.x)/e),n=t.gravityRadius*(Math.abs(t.y-this.y)/e);this.x>t.x&&this.x<t.x+i?this.x+=2*this.speed:this.x<t.x&&this.x>t.x-i&&(this.x-=2*this.speed),this.y>t.y&&this.y<t.y+n?this.y+=this.speed:this.y<t.y&&this.y>t.y-n&&(this.y-=this.speed)}},{key:"render",value:function(){var t=this;O.ctx.beginPath(),O.ctx.fillStyle=t.color,O.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),O.ctx.fill()}}]),e}(T),R=_,E=function(t){function e(t){return Object(x["a"])(this,e),Object(S["a"])(this,Object(P["a"])(e).call(this,t))}return Object(j["a"])(e,t),Object(k["a"])(e,[{key:"render",value:function(t){var e=this;O.ctx.beginPath(),O.ctx.fillStyle=e.color,O.ctx.arc(t.x,t.y,3,0,2*Math.PI,!1),O.ctx.fill()}}]),e}(T),C=E,A=Math.random,G=function(){function t(e){Object(x["a"])(this,t),this.x=e.x,this.y=e.y,this.vx=4*A()-2,this.vy=4*A()-2,this.destroy=!1,this.speed=.04,this.size=e.size||2,this.color=e.color||"rgb(30,136,168)",this.width=this.size+2*A(),this.height=this.size+2*A()}return Object(k["a"])(t,[{key:"update",value:function(){this.x+=this.vx,this.y+=this.vy,this.width-=this.speed,this.height-=this.speed,this.width<0&&(this.destroy=!0)}},{key:"render",value:function(){O.ctx.fillStyle=this.color,O.ctx.fillRect(this.x,this.y,this.width,this.height)}}]),t}(),L=G,z="rgb(30,136,168)",I=1,B=function(t){function e(t){var i;return Object(x["a"])(this,e),i=Object(S["a"])(this,Object(P["a"])(e).call(this,t)),i.enemys=t.enemys,i.color=t.color||z,i.radius=5,i.livesPoint=[],i.lives=t.lives||3,i.tail=[],i.tailLen=10,i.dead=!1,i.hasShield=!1,i.shieldRadius=20,i.shieldColor="rgba(30,136,168,0.6)",i.hasGravity=!1,i.gravityRadius=80,i.gravityTime=500,i.particleCount=30,i.particles=[],i.binding(),i.initLife(),i}return Object(j["a"])(e,t),Object(k["a"])(e,[{key:"binding",value:function(){var t=document.getElementsByClassName("canvas")[0],e=this,i=t.getBoundingClientRect().left,n=t.getBoundingClientRect().top;t.addEventListener("mousemove",function(t){e.moveTo(t.clientX-i,t.clientY-n)}),t.addEventListener("touchmove",function(t){var a=t.touches[0];e.moveTo(a.clientX-i,a.clientY-n)})}},{key:"moveTo",value:function(t,e){this.x=t,this.y=e}},{key:"die",value:function(){this.dead=!0}},{key:"initLife",value:function(){this.livesPoint=[];for(var t=0;t<this.lives;t++)this.livesPoint.push(new C({}))}},{key:"addLife",value:function(){this.livesPoint.push(new C({}))}},{key:"loseLife",value:function(){this.livesPoint.shift()}},{key:"flash",value:function(){var t=this;t.flashing=!0;var e=setTimeout(function(){t.flashing=!1,t.color=z,clearTimeout(e)},500)}},{key:"render",value:function(){var t=this;t.dead||(O.ctx.beginPath(),t.flashing&&(t.color=["#fff",z][Math.round(Math.random())]),O.ctx.fillStyle=t.color,O.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),O.ctx.fill(),I%2&&t.recordTail(),I++,t.tail.length>5*t.livesPoint.length&&t.renderTail(),t.hasShield&&t.renderShield(),t.hasGravity&&t.renderGravity(),t.particles.length&&t.renderBoom())}},{key:"recordTail",value:function(){var t=this;t.tailLen=5*t.livesPoint.length+10,t.tail.length>t.tailLen&&t.tail.splice(0,t.tail.length-t.tailLen),t.tail.push({x:t.x,y:t.y})}},{key:"renderTail",value:function(){var t,e,i=this,n=i.tail;O.ctx.beginPath(),O.ctx.lineWidth=2,O.ctx.strokeStyle=i.color;for(var a=0;a<n.length-1;a++)t=n[a],e=n[a+1],t.x-=.5,t.y+=.5,0==a?O.ctx.moveTo(t.x,t.y):O.ctx.lineTo(e.x,e.y);O.ctx.stroke(),i.renderLife()}},{key:"renderLife",value:function(){for(var t=this,e=1;e<=t.livesPoint.length;e++){var i=5*e,n=t.livesPoint[e-1];n.render(t.tail[i])}}},{key:"renderShield",value:function(){O.ctx.beginPath(),O.ctx.globalCompositeOperation="source-over",O.ctx.fillStyle=this.shieldColor,O.ctx.arc(this.x,this.y,this.shieldRadius,0,2*Math.PI,!1),O.ctx.fill(),O.ctx.strokeStyle="#5DAC81",O.ctx.arc(this.x,this.y,this.shieldRadius,0,2*Math.PI,!1),O.ctx.stroke(),this.shieldRadius-=.02,this.shieldRadius<15&&(this.shieldColor="rgba(30,136,168,0.6)"===this.shieldColor?"rgba(30,136,168,0.2)":"rgba(30,136,168,0.6)"),this.shieldRadius<10&&(this.hasShield=!1,this.shieldColor="rgba(30,136,168,0.6)",this.shieldRadius=20)}},{key:"renderGravity",value:function(){O.ctx.beginPath(),O.ctx.globalCompositeOperation="source-over";var t=O.ctx.createRadialGradient(this.x,this.y,this.radius,this.x,this.y,this.gravityRadius);t.addColorStop(0,"rgba(30,136,168,0.8)"),t.addColorStop(1,"rgba(30,136,168,0)"),O.ctx.fillStyle=t,O.ctx.arc(this.x,this.y,this.gravityRadius,0,2*Math.PI,!1),O.ctx.fill(),this.gravityTime--<0&&(this.hasGravity=!1,this.gravityTime=500)}},{key:"renderBoom",value:function(){for(var t=0;t<this.particles.length;t++)for(var e=this.particles[t],i=0;i<e.length;i++)e[i].destroy?(e.splice(i,1),i--):(e[i].render(),e[i].update())}},{key:"setSkill",value:function(t){var e=this;switch(e.skill=t,e.skill){case"shield":e.shieldRadius=20,e.hasShield=!0;break;case"gravity":e.gravityTime=500,e.hasGravity=!0;break;case"time":if(e.enemys){for(var i in e.enemys)e.enemys[i].speedDown(.8);var n=setTimeout(function(){for(var t in e.enemys)e.enemys[t].speedUp(.8);clearTimeout(n)},5e3)}break;case"minimize":if(e.enemys){for(var a in e.enemys)e.enemys[a].minimize();var s=setTimeout(function(){for(var t in e.enemys)e.enemys[t].magnify();clearTimeout(s)},5e3)}break;case"life":e.addLife();break}}},{key:"collision",value:function(t,e){this.hasShield?this.boom(t||this.x,e||this.y,"red"):0!=this.livesPoint.length?(this.loseLife(),this.boom(this.x,this.y),this.flash()):0==this.livesPoint.length&&this.boom(this.x,this.y)}},{key:"boom",value:function(t,e,i,n){for(var a=this,s=[],r=0;r<a.particleCount;r++)s.push(new L({x:t,y:e,color:i,size:n}));a.particles.push(s)}}]),e}(T),q=B,N={shield:"#007766",gravity:"#225599",time:"#665599",minimize:"#acac00",life:"#009955"},F={shield:"盾",gravity:"力",time:"慢",minimize:"小",life:"命"},U=function(t){function e(t){var i;return Object(x["a"])(this,e),i=Object(S["a"])(this,Object(P["a"])(e).call(this,t)),i.radius=9,i.isEated=!1,i.type=t.type,i}return Object(j["a"])(e,t),Object(k["a"])(e,[{key:"update",value:function(){this.x-=this.speed,this.y+=this.speed,(this.x<-10||this.y>O.height+10)&&(this.x=Math.random()*O.width+O.width,this.y=-Math.random()*O.height,this.reset())}},{key:"reset",value:function(){this.radius=9,this.isEated=!1,this.type=["shield","gravity","time","minimize","life",""][Math.floor(5*Math.random())]}},{key:"use",value:function(){this.isEated=!0,this.radius=0}},{key:"render",value:function(){var t=this;O.ctx.beginPath(),t.color=N[t.type],O.ctx.fillStyle=t.color,O.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),O.ctx.fill(),t.isEated||(O.ctx.fillStyle="#fff",O.ctx.fillText(F[t.type],t.x-5,t.y+3))}}]),e}(R),D=U,V=!1,$=[],W=30,H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},J=function(t){return window.cancelAnimationFrame(t)},X={name:"escape",data:function(){return{state:0,life:0,time:0}},methods:{mapInit:function(){console.log("111");var t=this.$refs.canvas;t.width=t.clientWidth,t.height=t.clientHeight,O.init({canvas:t,width:t.clientWidth,height:t.clientHeight})},createEnemy:function(t){$=[];for(var e=0;e<t;e++){var i=Math.random()*O.width+O.width,n=Math.random()*O.height;$.push(new R({x:i,y:n}))}},createSkill:function(){var t=Math.random()*O.width+O.width,e=Math.random()*O.height,i=["shield","gravity","time","minimize","life"][Math.floor(5*Math.random())];v=new D({x:t,y:e,type:i})},createPlayer:function(){f=new q({x:O.width/5,y:.6*O.height,enemys:$}),this.life=f.livesPoint.length},initRoles:function(){this.createEnemy(W),this.createPlayer(),this.createSkill()},beforeAnimate:function(){this.createEnemy(W),function t(){if(!V){O.render();for(var e=0;e<$.length;e++)$[e].render(),$[e].update();sessionStorage.animationID=H(t)}}()},initTimer:function(){var t=this;t.time=0;try{clearTimeout(timer)}catch(i){}var e=function e(){if(2==t.state)return!1;var i=setTimeout(function(){if(t.time++,t.time%10==0)for(var n=0;n<$.length;n++)$[n].speedUp();clearTimeout(i),e()},1e3)};e()},startGame:function(){V=!0,this.state=1,this.initRoles(),this.initTimer(),this.gameStartAnimate()},resetGame:function(){V=!0,this.state=1,this.initRoles(),this.initTimer()},gameStartAnimate:function(){O.render(),this.collision(v,f)&&(v.isEated||(f.setSkill(v.type),v.use()));for(var t=0;t<$.length;t++)$[t].render(),$[t].update(),f.dead||!this.collision($[t],f)||$[t].collision||(f.hasGravity?$[t].escape(f):f.hasShield?(f.collision($[t].x,$[t].y),$.splice(t,1),$.push(new R({x:Math.random()*O.width+O.width,y:Math.random()*O.height}))):0==f.livesPoint.length?(f.die(),this.state=2):(f.collision($[t].x,$[t].y),$[t].collision=!0));this.life=f.livesPoint.length,f.render(),v.render(),v.update(),sessionStorage.animationID=H(this.gameStartAnimate)},collision:function(t,e){var i=e.x-t.x,n=e.y-t.y;return e.hasGravity?Math.hypot(i,n)<e.gravityRadius+t.radius:e.hasShield?Math.hypot(i,n)<e.shieldRadius+t.radius:Math.hypot(i,n)<e.radius+t.radius}},mounted:function(){J(sessionStorage.animationID),this.mapInit(),this.beforeAnimate()}},Y=X,K=(i("fa5e"),Object(h["a"])(Y,g,b,!1,null,"140effb1",null));K.options.__file="escape.vue";var Q=K.exports;Q.install=function(t){t.component(Q.name,Q)};var Z=Q,tt=[Z],et=function t(e){t.installed||tt.map(function(t){e.use(t)})};"undefined"!==typeof window&&window.Vue&&et(window.Vue);var it={install:et,escape:Z};n["default"].use(p.a),n["default"].use(it),n["default"].config.productionTip=!1,new n["default"]({router:u["a"],store:m,render:function(t){return t(l)}}).$mount("#app")},c88a:function(t,e,i){"use strict";var n=i("7376"),a=i.n(n);a.a},fa5e:function(t,e,i){"use strict";var n=i("1a49"),a=i.n(n);a.a}});